---
title: The Data
description: 
toc: true 
featuredVideo: 
featuredImage: 
draft: false
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
</div>

<div id="TOC">
</div>

<div id="overview" class="section level2">
<h2>Overview</h2>
<div class="line-block">          With the world population recently
surpassing the 8 billion threshold, and the increasing challenges of
food security and scrutiny on the effects of agriculture on climate
change, we wanted to further examine some of the relationships that
factor into food waste and loss.</div>
<div class="line-block">          The first step in our data collection
process was to find data on Food Waste and Loss around the world, which
we found via the Food and Agriculture Organization database. This
dataset was curated by the United Nation in efforts to better identify
food waste and loss in each country. In addition, the dataset provides
information on food waste and loss based on commodities as well as
stages in the supply chain. The dataset contains information around
two-hundred countries and provides historical data of food waste and
loss as a percentage dating back to the 1960’s. (How it was
collected)</div>
<div class="line-block">          To supplement our analysis, we added
variables that we considered to be relevant contributors to the overall
food waste and loss. The first set of variables we introduced were Year,
GDP, Percentage of GDP as Agriculture, Percentage of Land used for
Agriculture, and Population by country. These datasets were extracted
from the World Bank’s database, which actively collects general census
data for most countries. To better match our primary Food Waste and Loss
dataset, we have downloaded the datasets from the World Bank to date
back to the 1960’s as well. The next set we introduced is data on Food
Production in tonnes. This data was curated, again, by the Food and
Agriculture Organization of the United Nations, in an effort to study
food waste and loss by country. The last variable that we added to our
analysis was Region/Continent, which was sorted using Rstudio based on
the country’s region.</div>
<div id="links-to-data" class="section level4">
<h4>Links to data:</h4>
<p>Food waste: <a href="https://www.fao.org/platform-food-loss-waste/flw-data/en">https://www.fao.org/platform-food-loss-waste/flw-data/en</a><br>
Production:<a href="https://www.fao.org/faostat/en/#data/QCL">https://www.fao.org/faostat/en/#data/QCL</a><br>
World Development Indicators: <a href="https://databank.worldbank.org/reports.aspx?source=2&amp;series=NY.GDP.MKTP.CD&amp;country=#">https://databank.worldbank.org/reports.aspx?source=2&amp;series=NY.GDP.MKTP.CD&amp;country=#</a></p>
</div>
</div>
<div id="initial-cleaning-food-agriculture-and-organization-data" class="section level2">
<h2>Initial Cleaning Food Agriculture and Organization Data</h2>
<div id="food-waste-and-loss" class="section level3">
<h3>Food Waste and Loss</h3>
<div class="line-block">          The Food Waste and Loss dataset is the
one that requires the least cleaning. As aforementioned, the dataset
provides information about waste and loss based on stages in the supply
chain. However, due to the data collection method utilized by the United
Nation, this information is incomplete and inconsistent from country to
country. Hence, because of the large amount of missing information, some
columns will be removed from the original dataset for our research
purposes. The data that will not be relevant to our analysis are:
activity, commodities code (both given by name in addition to code),
sample size (majority NA), treatment, references,
cause_of_loss,method_data_collection,notes,loss_quantity, and url.</div>
<div class="line-block">          We cleaned the dataset by piping the
data using group_by, isolating the year, country, and commodity. This
would allow us to use only what we need for this research and to size
down the dataset. Later, piped this into a summarise() function to find
the mean loss percentage, this would eliminate any duplicate commodities
that were loss in the same year by the same country. This new cleaned
dataset was stored in a new variable named fw1 (food waste 1).</div>
<pre class="r"><code>## CLEAN the Food_waste data:

#Food_waste$m49_code &lt;- NULL 
#Food_waste$country &lt;- NULL 
#Food_waste$region &lt;- NULL
Food_waste$loss_percentage_original &lt;- NULL
Food_waste$activity &lt;- NULL
Food_waste$treatment &lt;- NULL
Food_waste$cause_of_loss &lt;- NULL
Food_waste$sample_size &lt;- NULL
Food_waste$method_data_collection &lt;- NULL
Food_waste$reference &lt;- NULL
Food_waste$url &lt;- NULL
Food_waste$notes &lt;- NULL
Food_waste$loss_quantity &lt;- NULL

Food_waste_clean &lt;- Food_waste %&gt;% group_by(year, country, commodity) %&gt;%
  summarise(mean_loss_percentage = mean(loss_percentage))</code></pre>
</div>
<div id="food-production" class="section level3">
<h3>Food Production</h3>
<div class="line-block">          The Food Production dataset; even
though its file size is bigger; is relatively “cleaner” in comparison to
the Food Waste and Loss dataset. The cleaning for this dataset that was
done to remove Item Code (CPC), Item Code,Year Code, Flag, and Flag
Description. Much like the treatment done to Food Waste and Loss, a new
variable was made, fp1 (food production 1), That used the
food_production dataset to be piped and group_by, the Item, Year, and
Unit.</div>
<pre class="r"><code>## CLEAN the Food_production data:

Food_production &lt;- read_csv(here::here(&quot;dataset-ignore&quot;, &quot;Production_All(Normalized).csv&quot;))

#Food_production$`Domain Code` &lt;- NULL 
#Food_production$Domain &lt;- NULL 
#Food_production$`Area Code (M49)` &lt;- NULL
#Food_production$Area &lt;- NULL
#Food_production$Element &lt;- NULL
Food_production$`Item Code (CPC)`&lt;- NULL
Food_production$`Year Code` &lt;- NULL
Food_production$Flag &lt;- NULL
Food_production$`Flag Description`&lt;- NULL

Food_production_clean &lt;- filter(Food_production, Food_production$Element == &quot;Production&quot;)</code></pre>
</div>
</div>
<div id="initial-cleaning-world-bank-data" class="section level2">
<h2>Initial Cleaning World Bank Data</h2>
<div class="line-block">          The datasets extracted from the World
Bank’s database are relatively “complete”. However, the four variables
that we introduced using their database (GDP, Agriculture as Percentage
of GDP, Percentage Agriculture Land, Population) share a common “issue”.
Due to exogenous factors, some countries have a significant amount of
missing values - mostly East European countries and small island
nations. This is because they simply did not exist, and therefore, data
was uncollectible. For example, much of the data for Eastern European
countries are not available until mid-to-late 1990s as they existed
within the Soviet Union prior to that. As such, we will have to treat
the missing values as NA despite most available data dating back to the
1960s.</div>
<p>The cleaning for this portion of data was defining the “Year” columns
as numeric rather than character as originally downloaded. The second
part was to drop the irrelevant columns, including country code, series
code, and series name. This can be seen in the chunk above/below:</p>
<pre class="r"><code>## CLEAN the GDP data:

# Datasets cleaning: GDP, AgriPercentageGDP, LandPercentage, and Population
suppressWarnings({
  #GDP
  GDP_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;GDP.csv&quot;), show_col_types = F)
  GDP_data &lt;- GDP_data %&gt;% group_by(GDP_data[3]) %&gt;% mutate_if(is.character, as.numeric) %&gt;% ungroup()
  GDP_data &lt;- GDP_data[-c(1, 2, 4)]
  GDP_data_clean &lt;- GDP_data
  #AgriPercentageGDP
  AgriGDP_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;AgriPercentageGDP.csv&quot;), show_col_types = F)
  AgriGDP_data &lt;- AgriGDP_data %&gt;% group_by(AgriGDP_data[3]) %&gt;% mutate_if(is.character, as.numeric) %&gt;% ungroup()
  AgriGDP_data &lt;- AgriGDP_data[-c(1, 2, 4)]
  AgriGDP_data_clean &lt;- AgriGDP_data
  #LandPercentage
  AgriLand_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;LandPercentage.csv&quot;), show_col_types = F)
  AgriLand_data &lt;- AgriLand_data %&gt;% group_by(AgriLand_data[3]) %&gt;% mutate_if(is.character, as.numeric) %&gt;% ungroup()
  AgriLand_data &lt;- AgriLand_data[-c(1, 2, 4)]
  AgriLand_data_clean &lt;- AgriLand_data
  #Population
  Population_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;population.csv&quot;), show_col_types = F)
  Population_data &lt;- Population_data %&gt;% group_by(Population_data[3]) %&gt;% mutate_if(is.character, as.numeric) %&gt;% ungroup()
  Population_data &lt;- Population_data[-c(1, 2, 4)]
  Population_data_clean &lt;- Population_data
})</code></pre>
</div>
<div id="packages-used-to-clean-code" class="section level2">
<h2>Packages Used to Clean Code:</h2>
<div class="line-block">          Given that most of the cleaning
required of the datasets were reorganization and redefining variables, a
significant portion of the cleaning was used using dplyr. The remaining
portion of the cleaning was done using base R functions. We also used a
Maps package for the purpose of making a very user-friendly graph that
uses a map as a way to display data. This makes it easy for people to
visualize different regional statistics. This graph is introduced in the
EDA page.</div>
<pre class="r"><code>source(here::here(&quot;static&quot;, &quot;load_and_clean_data.R&quot;))</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.4.0     ✔ purrr   0.3.4
## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## Rows: 32947 Columns: 18
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (15): country, region, cpc_code, commodity, loss_percentage_original, lo...
## dbl  (3): m49_code, year, loss_percentage
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## `summarise()` has grouped output by &#39;year&#39;, &#39;country&#39;. You can override using the `.groups` argument.
## Rows: 3786052 Columns: 13
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (7): Area Code (M49), Area, Item Code (CPC), Item, Element, Unit, Flag
## dbl (6): Area Code, Item Code, Element Code, Year Code, Year, Value
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:</code></pre>
</div>
<div id="warnings" class="section level2">
<h2>Warnings:</h2>
<div class="line-block">          For the cleaning of the World Bank
data, due to the conversion from character to numeric, it prompts R to
notify of warnings regarding the treatment of NAs. However, as we will
continue to recognize the missing values (reasons discussed above),
these warnings are ignored using the function supressWarnings().</div>
</div>
<div id="data-variables" class="section level2">
<h2>Data Variables:</h2>
<div class="line-block">          As stated before, this data set
focused on food production and waste based on varying regions. As such,
our data variables are quite easy to understand:</div>
<ol style="list-style-type: decimal">
<li><p>Country: Country the data is associated to</p></li>
<li><p>Commodity/Item: Categorization of food, e.g. Almonds, Cabbage,
Rice, etc.</p></li>
<li><p>Loss Percentage: Percentage of commodity loss as a percentage of
overall production</p></li>
<li><p>Value: Total amount of food produced in the given unit</p></li>
<li><p>Unit: Unit used to measured the production of food, quantity
given by ‘value’</p></li>
</ol>
<pre class="r"><code>source(here::here(&quot;static&quot;,&quot;load_and_clean_data.R&quot;))</code></pre>
<pre><code>## Rows: 32947 Columns: 18
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (15): country, region, cpc_code, commodity, loss_percentage_original, lo...
## dbl  (3): m49_code, year, loss_percentage
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## `summarise()` has grouped output by &#39;year&#39;, &#39;country&#39;. You can override using the `.groups` argument.
## Rows: 3786052 Columns: 13
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (7): Area Code (M49), Area, Item Code (CPC), Item, Element, Unit, Flag
## dbl (6): Area Code, Item Code, Element Code, Year Code, Year, Value
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:
## `mutate_if()` ignored the following grouping variables:</code></pre>
</div>

